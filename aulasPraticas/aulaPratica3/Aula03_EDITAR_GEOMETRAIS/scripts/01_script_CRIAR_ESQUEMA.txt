--#############
--# GRUPO 04
--#############



--=============
-- Liga��o � BD
--=============
\set dataBase my_gis_gps
;
\set userName postgres
;
\connect :dataBase :userName
;
--==========================
--==========================


--------------------------------
-- Criar o Esquema Relacional
--------------------------------
-- DROP VIEW IF EXISTS V_

DROP TABLE IF EXISTS gps_ponto;
DROP TABLE IF EXISTS terreno;
DROP TABLE IF EXISTS tipo_terreno;
---------------------------------



---------------------------------
-- TIPO_TERRENO
---------------------------------
CREATE TABLE tipo_terreno (
    ID_TIPO_TERRENO VARCHAR PRIMARY KEY
);



---------------------------------
-- TERRENO
---------------------------------
CREATE TABLE terreno (
    ID_TERRENO INTEGER PRIMARY KEY, 
    ID_TIPO_TERRENO VARCHAR, 
    CONSTRAINT FK1 FOREIGN KEY(ID_TIPO_TERRENO) REFERENCES tipo_terreno(ID_TIPO_TERRENO) 
);

SELECT AddGeometryColumn('public', 'terreno', 'g_terreno', 0, 'POLYGON', 2);

---------------------------------
-- GPS_PONTO
---------------------------------
CREATE TABLE gps_ponto (
    ID_ORDEM INTEGER,
    ID_TERRENO INTEGER, 
    CONSTRAINT PK_GPS_PONTO PRIMARY KEY(ID_ORDEM, ID_TERRENO), 
    CONSTRAINT FK1 FOREIGN KEY(ID_TERRENO) REFERENCES TERRENO(ID_TERRENO)
);

SELECT AddGeometryColumn('public', 'gps_ponto', 'g_ponto', 0, 'POINT', 2);

